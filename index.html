<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichMedia-實作測驗</title>
    <meta name="ad.size" content="width=320,height=480">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="styles.css">
    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
</head>
<body>
    <div class="ad-container">
        <div class="adcontent adcut1">
            <a class="premierLogo" href="https://www.performics.com/" target="_blank" rel="noopener noreferrer">
                <img src="src/cut1_logo.png" alt="premier-Logo">
            </a>
        </div>
        <div class="adcontent adcut2"  type="button" >
            <a class="videoLink" href="https://www.performics.com/" target="_blank" rel="noopener noreferrer" onclick="pauseAni(event)">
                <video id="adVideo" preload="auto" autoplay muted controls controlslist="nodownload nofullscreen noplaybackrate noprogress"> 
                    <source src="src/Video.mp4" type="video/mp4">
                </video>
            </a>
            <div class="swiper-carousel">
                <div class="swiper-wrapper">
                  <!-- Slide 1 -->
                  <div class="swiper-slide">
                    <a class="swipeLink" href="https://www.performics.com/our-work/" target="_blank" rel="noopener noreferrer" onclick="pauseAni(event)">
                      <img src="src/cut2_carousal1.png" alt="Image-1">
                    </a>
                  </div>
                  <!-- Slide 2 -->
                  <div class="swiper-slide">
                    <a class="swipeLink" href="https://www.performics.com/our-work/" target="_blank" rel="noopener noreferrer" onclick="pauseAni(event)">
                      <img src="src/cut2_carousal2.png" alt="Image-2">
                    </a>
                  </div>
                  <!-- Slide 3 -->
                  <div class="swiper-slide">
                    <a class="swipeLink" href="https://www.performics.com/our-work/" target="_blank" rel="noopener noreferrer" onclick="pauseAni(event)">
                      <img src="src/cut2_carousal3.png" alt="Image-3">
                    </a>
                  </div>
                </div>
                <!-- Add navigation arrows -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
            
        </div>
    </div>
    
    <script>

        var swiper = new Swiper('.swiper-carousel', {
          autoplay: {
            delay: 2800, 
            disableOnInteraction: false,
          },
          loop: true,
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          keyboard: {
            enabled: true,
          },
          simulateTouch: true, 
          slidesPerView: 1,
          spaceBetween: 0,
        });

        //自動輪播30s
        setTimeout(() => {
          swiper.autoplay.stop();
        }, 30000);

        // 廣告
        if (!Enabler.isInitialized()) {
          Enabler.addEventListener(studio.events.StudioEvent.INIT, init);
        } else {
          init();
        }

        function init() {        
          addListeners();
        }

        function addListeners(){
          document.getElementById('adVideo').addEventListener('click', exitClickVideo);
          var swipeBtn = document.getElementsByClassName('swipeLink');
          for (var i = 0; i < swipeBtn.length; i++) {
            swipeBtn[i].addEventListener('click', exitClickbanner);
          }
        }

        function exitClickVideo() {
          Enabler.exitOverride("Click video", "https://www.performics.com/");
        }
        function exitClickbanner() {
          Enabler.exitOverride("Click banner", "https://www.performics.com/our-work/");
        }

        // var adVideo = document.getElementById('adVideo');
        // Enabler.loadModule(studio.module.ModuleId.VIDEO, function() {
        //   studio.video.Reporter.attach('adVideo', adVideo);
        // });

        //點擊暫停影片&輪播
        function pauseAni(event) {
            event.preventDefault();
            var video = document.getElementById('adVideo');
            video.pause();
            swiper.autoplay.stop();
        }

        

    </script>
</body>

</html>
